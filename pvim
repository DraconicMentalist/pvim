#!/usr/bin/env sh

# Get the path to pvim
export PVIM=$(dirname $(readlink -e -- "$0"))

# check if there is an init/what version it is
if [ -f $PVIM/config/init.lua ]; then
  INIT="-u $PVIM/config/init.lua"
elif [ -f $PVIM/config/init.vim ]; then
  INIT="-u $PVIM/config/init.vim"
fi

#get the appimage if required
[ -f $PVIM/nvim.appimage ] || $PVIM/pvim-update

#run Neovim with the local files
$PVIM/nvim.appimage --clean --cmd "so $PVIM/pvim.lua" $INIT $@
